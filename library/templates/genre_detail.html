<!-- genre_detail.html -->
{% extends 'base.html' %}

{% block title %}{{ genre.name }} - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞{% endblock %}

{% block content %}
<div class="genre-header">
    <h1 class="section-title">üè∑Ô∏è {{ genre.name }}</h1>
    {% if genre.description %}
        <p class="genre-description">{{ genre.description }}</p>
    {% endif %}
    <div class="books-count">üìö –ö–Ω–∏–≥ –≤ –∂–∞–Ω—Ä–µ: {{ books|length }}</div>
</div>

{% if books %}
    <div class="books-grid">
        {% for book in books %}
        <div class="book-card">
            <div class="book-cover {% if not book.cover_url %}no-cover{% endif %}" 
                 {% if book.cover_url %}style="background-image: url('{{ book.cover_url }}')"{% endif %}>
                {% if not book.cover_url %}
                    üìñ –ù–µ—Ç –æ–±–ª–æ–∂–∫–∏
                {% endif %}
            </div>
            
            <h3 class="book-title">{{ book.title }}</h3>
            
            <p class="book-meta">
                ‚úçÔ∏è –ê–≤—Ç–æ—Ä: 
                {% if book.author %}
                    <a href="{% url 'author_detail' book.author.id %}" style="color: #ffab91; text-decoration: none;">
                        {% if book.author.avatar_url %}
                            <img src="{{ book.author.avatar_url }}" alt="{{ book.author.name }}" 
                                 style="width: 20px; height: 20px; border-radius: 50%; vertical-align: middle; margin-right: 5px;">
                        {% endif %}
                        {{ book.author.name }}
                    </a>
                {% else %}
                    <span style="color: #888;">–ù–µ —É–∫–∞–∑–∞–Ω</span>
                {% endif %}
            </p>
            
            <p class="book-meta">üìÖ –ì–æ–¥: {{ book.year }}</p>
            
            {% if book.genres.all %}
                <p class="book-meta">
                    üè∑Ô∏è 
                    {% for genre in book.genres.all|slice:":2" %}
                        <a href="{% url 'genre_detail' genre.id %}" style="color: #ffab91; text-decoration: none;">
                            {{ genre.name }}
                        </a>{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                    {% if book.genres.all|length > 2 %}...{% endif %}
                </p>
            {% endif %}
            
            {% if book.description %}
                <p class="book-meta">{{ book.description|truncatewords:15 }}</p>
            {% endif %}
            
            <a href="{% url 'book_detail' book.id %}">
                <button class="btn btn-read">üìñ –ß–∏—Ç–∞—Ç—å</button>
            </a>
        </div>
        {% endfor %}
    </div>
{% else %}
    <div class="no-data">
        üìö –í —ç—Ç–æ–º –∂–∞–Ω—Ä–µ –ø–æ–∫–∞ –Ω–µ—Ç –∫–Ω–∏–≥
        <br><small>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥—Ä—É–≥–∏–µ –∂–∞–Ω—Ä—ã</small>
    </div>
{% endif %}

<div class="text-center mt-30">
    <a href="{% url 'genre_list' %}" class="btn btn-back">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –∂–∞–Ω—Ä–æ–≤</a>
</div>
{% endblock %}