<!-- home.html -->
{% extends 'base.html' %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞{% endblock %}

{% block content %}
<div class="hero-section">
    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É!</h1>
    <p>–ß–∏—Ç–∞–π—Ç–µ –ª—É—á—à–∏–µ –∫–Ω–∏–≥–∏ –æ–Ω–ª–∞–π–Ω –±–µ—Å–ø–ª–∞—Ç–Ω–æ</p>
</div>

{% if featured_books %}
<section class="featured-books">
    <h2 class="section-title">‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∫–Ω–∏–≥–∏</h2>
    <div class="books-grid">
        {% for book in featured_books %}
        <div class="book-card">
            <div class="book-cover {% if not book.cover_url %}no-cover{% endif %}" 
                 {% if book.cover_url %}style="background-image: url('{{ book.cover_url }}')"{% endif %}>
                {% if not book.cover_url %}üìñ{% endif %}
            </div>
            <h3 class="book-title">{{ book.title }}</h3>
            <p class="book-meta">{{ book.author.name }}</p>
            
            <!-- –ñ–∞–Ω—Ä—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π -->
            {% if book.genres.all %}
                <p class="book-meta">
                    üè∑Ô∏è 
                    {% for genre in book.genres.all|slice:":2" %}
                        <span style="color: #ffab91;">{{ genre.name }}</span>{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </p>
            {% endif %}
            
            <a href="{% url 'book_detail' book.id %}" class="btn btn-read">–ß–∏—Ç–∞—Ç—å</a>
        </div>
        {% endfor %}
    </div>
</section>
{% endif %}

{% if recent_books %}
<section class="recent-books">
    <h2 class="section-title">üÜï –ù–æ–≤—ã–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è</h2>
    <div class="books-grid">
        {% for book in recent_books %}
        <div class="book-card">
            <div class="book-cover {% if not book.cover_url %}no-cover{% endif %}" 
                 {% if book.cover_url %}style="background-image: url('{{ book.cover_url }}')"{% endif %}>
                {% if not book.cover_url %}üìñ{% endif %}
            </div>
            <h3 class="book-title">{{ book.title }}</h3>
           <p class="book-meta">
    {% if book.author %}
        {{ book.author.name }}
    {% else %}
        <span style="color: #888;">–ê–≤—Ç–æ—Ä –Ω–µ —É–∫–∞–∑–∞–Ω</span>
    {% endif %}
</p>
            
            <!-- –ñ–∞–Ω—Ä—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π -->
            {% if book.genres.all %}
                <p class="book-meta">
                    üè∑Ô∏è 
                    {% for genre in book.genres.all|slice:":2" %}
                        <span style="color: #ffab91;">{{ genre.name }}</span>{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </p>
            {% endif %}
            
            <a href="{% url 'book_detail' book.id %}" class="btn btn-read">–ß–∏—Ç–∞—Ç—å</a>
        </div>
        {% endfor %}
    </div>
</section>
{% endif %}

<!-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∂–∞–Ω—Ä—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π -->
<section class="popular-genres">
    <h2 class="section-title">üî• –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∂–∞–Ω—Ä—ã</h2>
    <div class="genres-grid">
        {% for genre in popular_genres %}
        <div class="genre-card">
            <h3>{{ genre.name }}</h3>
            {% if genre.description %}
                <p>{{ genre.description|truncatewords:10 }}</p>
            {% endif %}
            <div class="book-count">üìö {{ genre.book_count }} –∫–Ω–∏–≥</div>
            <a href="{% url 'genre_detail' genre.id %}" class="btn btn-view">–°–º–æ—Ç—Ä–µ—Ç—å –∫–Ω–∏–≥–∏</a>
        </div>
        {% endfor %}
    </div>
</section>

<div class="stats">
    <div class="stat-item">
        <h3>üìö {{ total_books }}</h3>
        <p>–í—Å–µ–≥–æ –∫–Ω–∏–≥</p>
    </div>
    <div class="stat-item">
        <h3>‚úçÔ∏è {{ total_authors }}</h3>
        <p>–ê–≤—Ç–æ—Ä–æ–≤</p>
    </div>
    <div class="stat-item">
        <h3>üè∑Ô∏è {{ total_genres }}</h3>
        <p>–ñ–∞–Ω—Ä–æ–≤</p>
    </div>
</div>
{% endblock %}